(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cba6d908"],{1148:function(t,e,a){"use strict";var i=a("a691"),r=a("1d80");t.exports="".repeat||function(t){var e=String(r(this)),a="",s=i(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(a+=e);return a}},"159b":function(t,e,a){var i=a("da84"),r=a("fdbc"),s=a("17c2"),o=a("9112");for(var n in r){var c=i[n],l=c&&c.prototype;if(l&&l.forEach!==s)try{o(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(t,e,a){"use strict";var i=a("b727").forEach,r=a("b301");t.exports=r("forEach")?function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},4160:function(t,e,a){"use strict";var i=a("23e7"),r=a("17c2");i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"4de4":function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").filter,s=a("d039"),o=a("1dde"),n=o("filter"),c=n&&!s((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));i({target:"Array",proto:!0,forced:!n||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"81d4":function(t,e,a){"use strict";a.r(e);var i,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"movieDetails"},[a("div",{staticClass:"nav"},[a("van-nav-bar",{attrs:{title:"电影详情","left-text":"返回","left-arrow":"",border:t.noactive},on:{"click-left":t.back}})],1),a("div",{staticClass:"movie-post"},[a("img",{staticClass:"auto-img",attrs:{src:t.movieDetailsData.images.large,alt:""}}),a("div",{staticClass:"info clearfix"},[a("div",{staticClass:"number fl"},[a("div",{staticClass:"people"},[t._v("评论人数")]),a("div",{staticClass:"people-sum"},[a("span",[t._v(t._s(t.movieDetailsData.comments))])])]),a("div",{staticClass:"pingfen fl"},[a("div",{},[t._v("电影评分")]),a("div",{staticClass:"rank"},[t._v(t._s(t.movieDetailsData.rating.average))])]),a("div",{staticClass:"play-sum fr"},[a("div",[t._v("播放量")]),a("div",{staticClass:"play-count"},[t._v(t._s(t.movieDetailsData.playcount))])])])]),a("div",{staticClass:"movie-info clearfix"},[a("div",{staticClass:"img fl"},[a("img",{staticClass:"auto-img",attrs:{src:t.movieDetailsData.images.medium,alt:""}})]),a("div",{staticClass:"info1 fl"},[a("div",{staticClass:"name one-text"},[t._v(t._s(t.movieDetailsData.title))]),a("div",{staticClass:"type-time"},[a("span",{staticClass:"type"},[t._v(t._s(t.movieDetailsData.genresInfo))]),a("span",{staticClass:"time"},[t._v(t._s(t.movieDetailsData.durations[0]))])]),a("div",{staticClass:"date"},[t._v(" 上映日期："+t._s(t.movieDetailsData.pubdate)+" "),a("span",[t._v("("+t._s(t.movieDetailsData.countries[0])+")")])])])]),a("div",{staticClass:"content"},[a("van-tabs",{attrs:{"line-height":"1px",color:"#EB48AD","title-active-color":"#EB48AD",border:!1,background:"#060517"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("van-tab",{attrs:{title:"简介",name:"a"}},[t._v(t._s(t.movieDetailsData.summary))]),a("van-tab",{attrs:{title:"演员",name:"b"}},[a("div",{staticClass:"yanyuan"},[a("div",{staticClass:"yanyuan-box clearfix"},t._l(t.movieDetailsData.casts,(function(e,i){return a("div",{key:i,ref:"yanyuan",refInFor:!0,staticClass:"yanyuan-item"},[a("div",{staticClass:"name-img"},[a("img",{staticClass:"auto-img",attrs:{src:e.avatars.small,alt:""}})]),a("div",{staticClass:"name one-text"},[t._v(t._s(e.name))])])})),0)])]),a("van-tab",{attrs:{title:"影评",name:"c"}}),a("van-tab",{attrs:{title:"更多",name:"d"}},[t._v("内容 4")])],1)],1),a("div",{staticClass:"footer clearfix"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"shoucang fl"},[a("van-icon",{staticClass:"collection",class:{active:t.likeActive},attrs:{name:"like-o",size:"20px"},on:{click:function(e){return t.likeMovie(t.movieDetailsData)}}})],1),a("div",{staticClass:"fl"},[a("button",{staticClass:"buyticket",on:{click:function(e){return t.buyTick(t.movieDetailsData.id)}}},[t._v("购票")])]),a("div",{staticClass:"share fl"},[a("van-icon",{attrs:{name:"share",color:"#fff",size:"20px"}})],1)])])])},s=[],o=(a("a4d3"),a("4de4"),a("4160"),a("a15b"),a("b680"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),n=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u=Object(n["a"])("movieDetailsModule"),v=u.mapState,f=u.mapMutations,d=(i={name:"movieDetails",data:function(){return{active:!0,activeName:"a",tabActive:"home",noactive:!1}},methods:{onClickLeft:function(){this.$router.go(-1)}},computed:l({},v(["movieDetailsData","display","likeActive"]))},Object(o["a"])(i,"methods",l({},f(["changeDisplay","resetState"]),{back:function(){this.$router.go(-1)},likeMovie:function(t){console.log("item==>",t);var e=localStorage.getItem("user");if(e){if(e=JSON.parse(e),!e.isLogin)return this.$router.push({name:"login"});var a=localStorage.getItem("likeMovieData");a=a?JSON.parse(a):{};var i=a[e.username];i||(a[e.username]=[]);for(var r=0;r<a[e.username].length;r++)if(a[e.username][r].id==t.id)return void this.$toast("你已经收藏过该电影");this.$store.commit("movieDetailsModule/changelikeActive",!0),a[e.username].unshift(t),console.log("likeMovieData==>",a),localStorage.setItem("likeMovieData",JSON.stringify(a)),this.$toast.success("收藏成功")}else this.$router.push({name:"login"})},buyTick:function(t){this.$router.push({name:"buyMovieTick",query:{id:t}})}})),Object(o["a"])(i,"created",(function(){var t=this;this.$toast.loading({duration:0,message:"加载中..."}),this.resetState();var e=this.$route.params.id;console.log(e),this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/subject/"+e}).then((function(e){console.log(e.data.popular_comments[0].content),e.data.genresInfo=e.data.genres.join(" / ");var a=e.data.comments_count,i=e.data.ratings_count;e.data.comments=a>=1e4?(a/1e4).toFixed(1)+"w":a>=1e3?(a/1e3).toFixed(1)+"k":a,e.data.playcount=i>=1e4?(i/1e4).toFixed(1)+"w":i>=1e3?(i/1e3).toFixed(1)+"k":i,t.$store.dispatch("movieDetailsModule/getMovieDetailsData",e.data).then((function(){t.$toast.clear();var e=localStorage.getItem("user"),a=e&&JSON.parse(e).isLogin;if(a){var i=JSON.parse(e).username,r=localStorage.getItem("likeMovieData");r=r?JSON.parse(r):{};var s=r[i];s=s||[];for(var o=0;o<s.length;o++)if(t.movieDetailsData.id==s[o].id)return void t.$store.commit("movieDetailsModule/changelikeActive",!0);t.$store.commit("movieDetailsModule/changelikeActive",!1)}else t.$store.commit("movieDetailsModule/changelikeActive",!1)}))})).catch((function(e){t.$toast.clear()}))})),i),m=d,b=(a("b675"),a("2877")),g=Object(b["a"])(m,r,s,!1,null,"35704c66",null);e["default"]=g.exports},a15b:function(t,e,a){"use strict";var i=a("23e7"),r=a("44ad"),s=a("fc6a"),o=a("b301"),n=[].join,c=r!=Object,l=o("join",",");i({target:"Array",proto:!0,forced:c||l},{join:function(t){return n.call(s(this),void 0===t?",":t)}})},ade3:function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return i}))},b301:function(t,e,a){"use strict";var i=a("d039");t.exports=function(t,e){var a=[][t];return!a||!i((function(){a.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,a){var i=a("23e7"),r=a("7b0b"),s=a("df75"),o=a("d039"),n=o((function(){s(1)}));i({target:"Object",stat:!0,forced:n},{keys:function(t){return s(r(t))}})},b675:function(t,e,a){"use strict";var i=a("eb8f"),r=a.n(i);r.a},b680:function(t,e,a){"use strict";var i=a("23e7"),r=a("a691"),s=a("408a"),o=a("1148"),n=a("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},v=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){c.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,i,n,c=s(this),f=r(t),d=[0,0,0,0,0,0],m="",b="0",g=function(t,e){var a=-1,i=e;while(++a<6)i+=t*d[a],d[a]=i%1e7,i=l(i/1e7)},h=function(t){var e=6,a=0;while(--e>=0)a+=d[e],d[e]=l(a/t),a=a%t*1e7},p=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var a=String(d[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(e=v(c*u(2,69,1))-69,a=e<0?c*u(2,-e,1):c/u(2,e,1),a*=4503599627370496,e=52-e,e>0){g(0,a),i=f;while(i>=7)g(1e7,0),i-=7;g(u(10,i,1),0),i=e-1;while(i>=23)h(1<<23),i-=23;h(1<<i),g(1,1),h(2),b=p()}else g(0,a),g(1<<-e,0),b=p()+o.call("0",f);return f>0?(n=b.length,b=m+(n<=f?"0."+o.call("0",f-n)+b:b.slice(0,n-f)+"."+b.slice(n-f))):b=m+b,b}})},dbb4:function(t,e,a){var i=a("23e7"),r=a("83ab"),s=a("56ef"),o=a("fc6a"),n=a("06cf"),c=a("8418");i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,a,i=o(t),r=n.f,l=s(i),u={},v=0;while(l.length>v)a=r(i,e=l[v++]),void 0!==a&&c(u,e,a);return u}})},e439:function(t,e,a){var i=a("23e7"),r=a("d039"),s=a("fc6a"),o=a("06cf").f,n=a("83ab"),c=r((function(){o(1)})),l=!n||c;i({target:"Object",stat:!0,forced:l,sham:!n},{getOwnPropertyDescriptor:function(t,e){return o(s(t),e)}})},eb8f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-cba6d908.3bac2e9b.js.map